<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>08.3 B-деревья</title>
	<base target="_parent">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" >
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/idea.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/valladim-pw/java-level2-lessons@master/src/A_Visual-Materials/styles/style.css">-->
	<link rel="stylesheet" href="styles/style.css">
	<link rel="stylesheet" href="styles/mobile-style.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
	<style >
	</style>
</head>
<body onload="insertLabel(); bothLeftRight();">
<div class="container-fluid p-3">
	<div class="head-buttons" id="header">
		<p>Кнопками можно регулировать размер колонок L(левая) и R(правая) от 100% до 0% с шагом 10% (по умолчанию 50%/50%).</p>
		<div class="but-wrap">
			<div class="back-fix"></div>
		  <div class="but100-wrap left">
				<button class="btn" onclick="oneLeft();">100L</button>
			</div>
		  <div class="zoomBut">
				<button class="btn" onclick="zoomLeft();" >50L</button>
				<button class="btn" onclick="zoomRight();" >50R</button>
			</div>
			<div class="but100-wrap right">
				<button class="btn" onclick="oneRight();">100R</button>
			</div>
			<div class="but50-wrap">
				<button class="btn active" onclick="bothLeftRight();">50L&nbsp;&nbsp;&nbsp;&nbsp;50R<div class="divider"></div></button>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="column">
			<span class="badge bg-primary">Рис.1&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.1.png" >
			<p></p>
			<p onclick="openWin0()">
			<script>
			function openWin0() {
			  window.open("https://github.com/valladim-pw/java-level2-lessons/tree/master/src/Less07_TypeOfLinks_GarbageCollector","_blank","titlebar=yes, toolbar=yes, location=yes, directories=yes, status=yes, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://github.com/valladim-pw/java-level2-lessons/tree/master/src/Less07_TypeOfLinks_GarbageCollector">
			Файлы по теме</a><span class="fwrap"><i class="fa fa-folder"></i><i class="fa fa-github"></i></span></i></p>
			<p><b>Дополнительные материалы по теме</b>:</p>
			<p onclick="openWin1a()">
			<script>
			function openWin1a() {
			  window.open("https://java-online.ru/garbage-collection.xhtml","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <a class="github" href="https://java-online.ru/garbage-collection.xhtml">
			Сборщик мусора Garbage Collection (принцип работы)</a>
			</p>
			<p onclick="openWin1b()">
			<script>
			function openWin1b() {
			  window.open("https://javarush.com/quests/lectures?quest=QUEST_JSP_SERVLETS&level=18","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <a class="github" href="https://javarush.com/quests/lectures?quest=QUEST_JSP_SERVLETS&level=18">
			Работа с памятью в Java (цикл лекций)</a>
			</p>
			<p onclick="openWin1c()">
			<script>
			function openWin1c() {
			  window.open("https://habr.com/ru/articles/269621/","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <a class="github" href="https://habr.com/ru/articles/269621/">
			Все типы сборщиков мусора в Java (цикл статей)</a>
			</p>
			<p onclick="openWin1d()">
			<script>
			function openWin1d() {
			  window.open("https://sannystark.github.io/java/jvm/gc/2015/12/23/gc-jvm-part2.html","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <a class="github" href="https://sannystark.github.io/java/jvm/gc/2015/12/23/gc-jvm-part2.html">
			Принцип работы Serial GC и Parallel GC</a>
			</p>
			<p onclick="openWin1e()">
			<script>
			function openWin1e() {
			  window.open("https://docs.oracle.com/en/java/javase/20/gctuning/introduction-garbage-collection-tuning.html#GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <a class="github" href="https://docs.oracle.com/en/java/javase/20/gctuning/introduction-garbage-collection-tuning.html#GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304">
			HotSpot Virtual Machine Garbage Collection</a>
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.2&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.2.png">
			<p>
			* Классическая программа на <i>Java</i> состоит из нескольких потоков, для каждого из которых есть свой стэк.</br>
			* Куча (<i>Heap</i>) для всех потоков одна.</br>
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.3&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.3.png">	
			<p>			
			* Вспомним, какие бывают переменные: примитивные и ссылочные.</br>
			* Локальные переменные и параметры функций хранятся в стэке, но примитивные переменные хранят значение, а ссылочные хранят только ссылку на объект.</br>
			* Сами объекты - значения ссылочных переменных, хранятся в куче.</br>			
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.4&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.4.png">
			<p >			
			* Согласно <b>LIFO</b> (<i>Last-In-First-Out</i>) на вершине стэка будет последняя по порядку переменная (ссылка <i>str2</i>).</br>			
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.5&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.5.png">
			<p onclick="openWin5()">
			<script>
			function openWin5() {
			  window.open("https://github.com/valladim-pw/java-level2-lessons/blob/master/src/Less07_TypeOfLinks_GarbageCollector/_1_GarbageCollector/FiboWithRecursion.java","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://github.com/valladim-pw/java-level2-lessons/blob/master/src/Less07_TypeOfLinks_GarbageCollector/_1_GarbageCollector/FiboWithRecursion.java">			
			FiboWithRecursion.java</a><i class="fa fa-github"></i></i></p>
			<p onclick="openWin6()">
			<script>
			function openWin6() {
			  window.open("https://github.com/valladim-pw/java-level2-lessons/blob/master/src/Less07_TypeOfLinks_GarbageCollector/_1_GarbageCollector/MemoryUtil.java","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://github.com/valladim-pw/java-level2-lessons/blob/master/src/Less07_TypeOfLinks_GarbageCollector/_1_GarbageCollector/MemoryUtil.java">			
			MemoryUtil.java (класс для мониторинга сборки мусора)</a><i class="fa fa-github"></i></i></p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.6&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.6.png">			
			<p >			
			* <b>Стэк-фрейм</b> - это блок, формирующийся в стэке при вызове каждой функции, в который помещаются параметры и переменные.</br>
			* Для <i>main( )</i> стэк начал формироваться еще до исполнения первого оператора, потому что был передан параметр <i>String[ ] args</i>,</br> 
			и соответственно в него помещается ссылка на пустой массив <i>args = { }</i>.</br>	
			* Для компилятора процесс исполнения первого оператора выглядит следующим образом:</br>
			он сначала вычисляет <i>getFibo(5)</i>, а уже потом инициализирует объект <i>FiboWithRecursion</i> и присваивает значение <i>getFibo(5)</i> ссылке <i>fwr</i>.</br>
			Поэтому в стэк следующим помещается <i>getFibo(5)</i> и далее значения <i>getFibo(num - 1)</i> по прямому ходу рекурсии до выхода из него (4, 3, 2).</br>
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.7&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.7.png">
			<p>
			* В процессе обратного хода рекурсии в стэк добавляются ссылки на объект <i>preFibo</i> со значениями, соответствующими <i>num</i> на вершине стэка.<br>
			* При этом объеты <i>preFibo</i> попадают в кучу.<br>
			* По ходу рекурсии ссылка на вершине стэка убирается и заменяется следующей ссылкой, объект которой также попадает в кучу.<br>
			* По окончании хода рекурсии ссылке <i>fwr</i> в методе <i>main</i> присваивается искомое значение <i>getFibo</i> объект попадает в кучу, а ссылок на <i>getFibo</i> в стэке больше не существует.<br>
			* Таким образом объекты <i>getFibo</i> остаются в куче, хотя ссылок на эти объекты в стэке уже нет.<br>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.8&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.8.png">
			<p>					
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.9&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.9.png">
			<p>				
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.10&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.10.png">
			<p>
			* Процесс <b>фрагментации</b> кучи показан на  примере кучи с двумя объектами <b>A</b> и <b>B</b> (1).</br>
			При удалении объекта <b>B</b>, пространство выделенное под два объекта занимает теперь только объект <b>A</b>, располагаясь посередине кучи.</br>
			* Если программа работает достаточно долго, то куча может принять примерно такой фрагментированный вид (2), где белым окрашены свободные места.</br>
			* При вставке объекта <b>С</b> можно либо вставить его в любое свободное место, большее по размерам, но тогда образуются дополнительные свободные места, т.е. 
			фрагментация увеличится.</br>
			Либо можно, как показано на рисунке, найти подходящее по размеру место, но тогда тратятся дополнительные ресурсы и время на поиск.</br>
			* Также возникает проблема при вставке условного объекта <b>D</b> большого размера, так как под него не найдется свободного места и мы получим ошибку <i>OutOfMemory</i>, при том что 
			в куче вполне достаточно суммарного свободного места, чтобы разместить такой объект.</br>
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.11&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.11.png">
			<p>
			
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.12&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.12.png">
			<p>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.13&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.13.png">
			<p>
			* <ins>Сборщики мусора используют концепцию <b>GS Roots</b> - корней сборки мусора</ins>.</br>
			Это 100% живые объекты от которых идут ссылки на другие живые объекты.</br>
			* Примеры <b>GS Roots</b>:</br>
			-	Классы, которые загружаются системным загрузчиком классов.</br>
			-	Живые потоки.</br>
			-	Параметры методов, которые выполняются в данный момент и локальные переменные.</br>
			-	Статические переменные, которые хранятся в специальной области <i>Metaspace</i>.</br>
			-	Объекты, которые применяются в качестве монитора для синхронизации.</br>
			-	Объекты, которые удерживаются из сборки мусора для некоторых целей.</br>
			* <b>Живые объекты</b> определяются сборщиком мусора в процессе обхода всего графа объектов по ссылкам, начиная с <i>GC Roots</i>.</br>
			* <b>Мертвые объекты</b> соответственно те, на которые сборщик не нашел ссылок от живых объектов.</br>
			* <ins>Стандартная реализация сборки мусора имеет три этапа</ins>:</br>
			<b>1. Mark</b> - На этом этапе сборщик мусора (GC) должен идентифицировать все живые объекты в памяти путем обхода графа объектов.</br>
			Когда он посещает объект, то помечает его как доступный и, следовательно, живой. Все объекты, недоступные из корней GC, рассматриваются как кандидаты на сбор мусора.</br>
			<b>2. Sweep</b> - После фазы разметки пространство памяти занято либо живыми (посещенными), либо мертвыми (не посещенными) объектами. 
			Фаза зачистки освобождает фрагменты памяти, которые содержат эти мертвые объекты.</br>
			<b>3. Compact</b> - Не обязательно, чтобы мертвые объекты, которые были удалены на предыдущей фазе, находились рядом друг с другом. 
			Таким образом, есть риск получить фрагментированное (полупустое) пространство памяти. Чтобы избежать этого сборщик мусора при удалении мертвых объектов уплотняет память, располагая
			оставшиеся объекты в непрерывном блоке в начале кучи.</br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.14&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.14.png">
			<p>
			* Большинство приложений имеют распределение времен жизни объектов, схематично описываемое кривой, показанной на рисунке.</br>
			* Подавляющее большинство объектов создаются на очень короткое время, они становятся ненужными практически сразу после их первого использования. 
			Итераторы, локальные переменные методов, результаты боксинга и прочие временные объекты, которые зачастую создаются неявно, 
			попадают именно в эту категорию, образуя пик в самом начале графика.<br>
			* Далее идут объекты, создаваемые для выполнения более-менее долгих вычислений. Их жизнь чуть разнообразнее — они обычно гуляют по различным методам, трансформируясь
			и обогащаясь в процессе, но после этого становятся ненужными и превращаются в мусор. 
			Благодаря таким объектам возникает небольшой бугорок на графике следом за пиком временных объектов.<br>
			* И, наконец, объекты-старожилы, переживающие почти всех — это постоянные данные программы, загружаемые часто в самом начале и проживающие долгую жизнь до остановки приложения.<br>
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.15&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.15.png">
			<p>
			* <b>Z</b> и <b>Shenandoah</b> в настоящий момент наиболее продвинутые и быстрые, но пока они считаются больше экспериментальными. <br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.16&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.16.png">
			<p>
		</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.17&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.17.png">
			<p>
			* После <i>JDK-8</i> изменилась область <i>Heap</i>, к которой применимы показатели <b>-Xms</b> (минимальный размер) и <b>-Xmx</b> (максимальный размер).</br>
			* Теперь в эту область входят только <i>Young Generation</i> (Молодое поколение) и <i>Tenured (Old) Generation</i> (Старое поколение), а <i>Permanent Generation</i>
			(метаданные по классам и методам) теперь находится в <i>Metaspace</i> и выделено из <i>Heap</i>.</br>			
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.18&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.18.png">
			<p>
			* Принцип сборки мусора основывается на поколениях, и к каждому участку памяти применяется свой алгоритм сборки.</br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.19&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.19.png" usemap="#map">
			<p>			
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.20&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.20.png">
			<p>
			* Новые объекты попадают в область <i>Eden</i>.</br>
			* При заполнении этой области запускается <i>Minor GC</i> (малая сборка мусора) - живые объекты из <i>Eden</i> копируются в <i>S0</i>
			 (это один из двух одинаковых по размеру блоков, на которые поделена область <i>Survivor</i>).</br>
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.21&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.21.png">
			<p>	
			* При очередном заполнении <i>Eden</i> и запуске <i>Minor GC</i> живые объекты из <i>Eden</i> и <i>S0</i> копируются в <i>S1</i>, соответственно <i>S0</i>
			очищается и становится доступна для живых объектов.</br>			
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.22&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.22.png">
			<p>
			* При следующем заполнении <i>Eden</i> живые объекты из <i>Eden</i> и <i>S1</i> копируются в пустой блок <i>S0</i>.</br>
			* Другими словами при работе <i>Minor GC</i> применяется алгоритм <b>Copying Collectors</b>.</br>
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.23&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.23.png">
			<p>
			* При периодическом повторении цикла малой сборки часть живых объектов попадает в область <i>Tenured</i> (Старшего поколения):</br>
			- минорный сборщик мусора отслеживает количество циклов переходов объектов из <i>S0</i> в <i>S1</i> и при определенном количестве таких циклов выживший объект
			уже считается достаточно старым и переносится в <i>Tenured</i>. </br>
			- также сборщик смотрит, хватает ли места при копировании объекта в <i>S0</i> или <i>S1</i>, если места недостаточно объект также перемещается в <i>Tenured</i>. </br>		
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.24&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.24.png">
			<p>			
			</p>					
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.25&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.25.png">
			<p>
			* После того как <i>Tenured</i> заполнился до определенной критической точки, начинается полная сборка мусора <i>Major GC</i>, 
			при которой стирается грань между поколениями (если быть точным то работает с двумя поколениями) и чистит всю память используя алгоритм <b>Mark-sweep-compact</b> (рис.13) 
			для старого поколения и <b>Copying collectors</b> для молодого.<br>
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.26&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.26.png">
			<p>			
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.27&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.27.png">
			<p>							
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.28&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.28.png">			
			<p>
			
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.29&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.29.png">
			<p>
			* Используя команду <b>java -XX:+PrintCommandLineFlags -version</b> можно узнать версию своего сборщика мусора по-умолчанию.<br>
			* В моем случае это <b>G1</b>.<br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.30&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.30.png">
			<p>
			* В <i>Windows</i> применив команду <b>java -XX:+PrintFlagsFinal -version | findstr Survivor</b> с использованием построчного поиска <b>findstr</b> (используется только в <i>Windows</i>) 
			можно получить параметры, касающиеся только сборщика мусора.<br>
			* Возможен результат применения команды как на рисунке (выделено красным), тогда нужно установить дополнительное значение переменной <i>Path</i> (подробнее на рис.31).<br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.31&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.31.png">
			<p>	
			* На рисунке показан порядок действий для установки либо добавления значений в системную переменную <i>Path</i> в <i>Windows</i>.<br>
			* Если не работает команда <b>findstr</b> по данной схеме нужно добавить в <i>Path</i> значение <b>C:\Windows\System32</b>.<br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.32&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.32.png">
			<p>
			* После изменения <i>Path</i> (рис.31) поиск по строке <i>Survivor</i> позволяет получить выборочно параметры сборщика мусора.</br>
			* Для <i>OS Ubuntu</i> для этих целей используется команда </br><b>java -XX:+PrintFlagsFinal -version | grep Survivor</b>. </br>
			</p>
			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.33&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.33.png">
			<p>					
			</p>		
		</div>
		<!--<div class="column">
			<span class="badge bg-primary">Рис.34&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.34.png">
			<p>	
			* После нажатия <i>Finish</i> у меня создается структура модуля плагина.<br>
			* Теперь я преобразую модуль в проект <code>File -> New -> Project from Existing Sources</code> (дальнейшие шаги в лекции "Maven, часть1", рис.12).<br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.35&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.35.png">
			<p>
			* После преобразования модуля в проект мы получаем готовую структуру плагина с классом <b>MyMojo.java</b> и тестовым классом <b>MyMojoTest.java</b>, которые
			располагаются в соответствующих правилам каталогах и пэкедже, определенном нами в <i>GroupId</i>.<br>
			* Внутри класса <i>MyMojo.java</i> (это название по умолчанию), определено имя плагина <b>touch</b> (выделено зеленым), которое является его целью.<br>
			<b>defaultPhase</b> - это сборочный цикл по умолчанию, к которому привязан данный плагин (выделено синим).<br>
			* Для сборки плагина в сборочном цикле жмем <i>install</i>, так как важно не только собрать плагин, но и загрузить его в локальный репозиторий, 
			чтобы можно было воспользоваться им для других проектов.<br>
			</p>			
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.36&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.36.png">
			<p>
			* В первый раз у меня сборка провалилась. В сообщении было предупреждение об отсутствии необходимого для тестирования плагина
			<b>surefire-junit-4</b> и приводился пример команды для ручной установки плагина.<br>
			* <i>jar</i>-файл плагина я скачал в репозитории по ссылке ниже.<br> 
			</p>
			<p onclick="openWin23()">
			<script>
			function openWin23() {
			  window.open("https://mvnrepository.com/artifact/org.apache.maven.surefire/surefire-junit4/2.22.1","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://mvnrepository.com/artifact/org.apache.maven.surefire/surefire-junit4/2.22.1">			
			MVNRepository.SureFire JUnit4 Runner 2.22.1</a></i></p>
			* В командной строке запустил предложенную в сообщении команду<br> 
			<code>mvn install:install-file -DgroupId=org.apache.maven.surefire -DartifactId=surefire-junit4 -Dversion=2.22.1 -Dpackaging=jar -Dfile=d:\JAVAProgwards\downloads\surefire-junit4-2.22.1.jar</code><br>
			(выделена желтым) и плагин успешно установился в локальный репозиторий.<br>
			* Оставалось еще раз запустить <i>install</i> в <i>IDEA</i> и сборка на этот раз завершилась успешно! (выделено красным)<br>
			<p onclick="openWin24()">
			<script>
			function openWin24() {
			  window.open("https://github.com/valladim-pw/java-level2-lessons/tree/7d1021db87391397e2d6879c2874a318e16c528d/src/Less06_MavenPlugin/MavenPlugin","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=700, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://github.com/valladim-pw/java-level2-lessons/tree/7d1021db87391397e2d6879c2874a318e16c528d/src/Less06_MavenPlugin/MavenPlugin">			
			MavenPlugin</a><i class="fa fa-github"></i></i></p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.37&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.37.png">
			<p>
			* Для проверки работоспособности созданного плагина <i>MavenPlugin</i> включим его в <i>pom.xml</i> файл нашего проекта <i>Maven1</i>.<br>
			* В блоке <i>executions</i> мы привязываем цель плагина <b>touch</b> (рис.35) к фазе сборочного цикла <i>Maven1</i> - <b>verify</b>.<br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.38&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.38.png">
			<p>
			* Теперь помотрим, что же делает наш плагин, заглянем в файл <i>MyMojo.java</i>.<br>
			* Я немного изменил код по умолчанию (строки изменений отмечены зеленым).<br>
			Теперь он пишет в создаваемый файл <i>touch.txt</i> пронумерованные строки с датой и временем.<br>
			</p>
			<p onclick="openWin25()">
			<script>
			function openWin25() {
			  window.open("https://github.com/valladim-pw/java-level2-lessons/blob/997b3a09ef95cca196bb774d0eebfafef87356ac/src/Less06_MavenPlugin/MavenPlugin/src/main/java/Less06_MavenPlugin/MyMojo.java","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=900, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://github.com/valladim-pw/java-level2-lessons/blob/997b3a09ef95cca196bb774d0eebfafef87356ac/src/Less06_MavenPlugin/MavenPlugin/src/main/java/Less06_MavenPlugin/MyMojo.java">
			MyMojo.java</a><i class="fa fa-github"></i></i></br>
			</p>
			<p onclick="openWin26()">
			<script>
			function openWin26() {
			  window.open("https://github.com/valladim-pw/java-level2-lessons/tree/997b3a09ef95cca196bb774d0eebfafef87356ac/src/Less06_MavenPlugin/MavenPlugin","_blank","toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=900, height=700");
			}
			</script>
			* <i class="github-wrap"><a class="github" href="https://github.com/valladim-pw/java-level2-lessons/tree/997b3a09ef95cca196bb774d0eebfafef87356ac/src/Less06_MavenPlugin/MavenPlugin">
			MavenPlugin</a><i class="fa fa-github"></i></i></br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.39&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.39.png">
			<p>
			* Теперь, если мы запустим в проекте <i>Maven1</i> фазу <b>verify</b> в отчете мы увидим, что плагин отработал с заданной целью (выделено красным).<br>
			
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.40&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.40.png">
			<p>
			* В результате успешной сборки в проекте <i>Maven1</i> в каталоге <b>target</b> появился файл <b>touch.txt</b> (выделено зеленым), а если посмотреть его содержимое,
			то в файле появилась очередная строка с временем и датой совпадающими с временем и датой окончания сборки (выделено красным).<br>
			</p>
		</div>
		<div class="column">
			<span class="badge bg-primary">Рис.41&nbsp;<i class="material-icons">&#xe5db;</i></span>
			<img src="images/images_08.3/08.3.41.png">
			<p>
			
			</p>
		</div>-->		
	</div>
</div>
<!--<script src="https://cdn.jsdelivr.net/gh/valladim-pw/java-level2-lessons@master/src/A_Visual-Materials/javascript/script.js"></script>-->
<script src="javascript/script.js"></script>
</body>
</html>









